/**
 * 438-ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²Â sÂ å’Œä¸€ä¸ªéç©ºå­—ç¬¦ä¸²Â pï¼Œæ‰¾åˆ°Â sÂ ä¸­æ‰€æœ‰æ˜¯Â pÂ çš„å­—æ¯å¼‚ä½è¯çš„å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚
å­—ç¬¦ä¸²åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯ï¼Œå¹¶ä¸”å­—ç¬¦ä¸²Â sÂ å’Œ pÂ çš„é•¿åº¦éƒ½ä¸è¶…è¿‡ 20100ã€‚
 */

// s: "cbaebabacd" p: "abc"
// s 'abab'  p 'ba'  è¿”å›[0ï¼Œ1ï¼Œ2]
// è¾“å‡º:
// [0, 6]

const s = 'cbaebabacd',
  p = 'abc';
/**
 * æ»‘åŠ¨çª—å£è§£é¢˜åŸç†æ˜¯ä½¿ç”¨åŒæŒ‡é’ˆä¸èƒ½æ‰¾åˆ°patterné•¿åº¦çš„å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œè€Œæ¯æ¬¡æ‰¾åˆ°é•¿åº¦ç›¸åŒçš„å­—ç¬¦ä¸²åè¿›è¡ŒåŒ¹é…
 * ï¼ˆæ¯”å¦‚ï¼šæ’åºåè¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒï¼‰éƒ½æ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œ
 * è¿™é‡Œå¯ä»¥é€šè¿‡æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°æ¥å®ç°åªç”¨O(n)æ—¶é—´å¤æ‚åº¦è§£é¢˜ã€‚
 * @param {*} s
 * @param {*} p
 */
var findAnagrams = function (s, p) {
  let list = [];
  //åˆ¤æ–­è¾¹ç•Œ
  if (!s || !p) return list;
  //è½¬æ•°ç»„
  s = [...s];
  //å­˜å¯¹è±¡ æ¯”è¾ƒå¥½åˆ¤æ–­ hash: { a: 1, b: 1, c: 1 }
  let hash = {};
  [...p].forEach((el) => (hash[el] ? hash[el]++ : (hash[el] = 1)));
  console.log('hash:', hash);
  //è®¾ç½®åŒæŒ‡é’ˆ
  let r = 0,
    l = 0,
    count = p.length;

  while (r < s.length) {
    //r ä¸‹æ ‡0  åˆ¤æ–­ hash.a > 0 è¡¨ç¤ºå­˜åœ¨åˆ™æ€»é•¿åº¦-1
    if (hash[s[r]] > 0) {
      count--;
    }
    hash[s[r]]--; //è¿™ä¸€æ­¥ç§»åˆ°å¤–é¢
    r++;

    //å­˜ä¸€ä¸‹ä¸‹æ ‡ä½ç½®
    if (count === 0) {
      list.push(l);
    }
    //å­—ç¬¦ä¸²ç›¸ç­‰
    if (r - l === p.length) {
      if (hash[s[l]] >= 0) {
        count++;
      }
      hash[s[l]]++;
      l++;
    }
  }
  return list;
};
console.log(
  '%c ğŸ§ findAnagrams: ',
  'font-size:20px;background-color: #4b4b4b;color:#fff;',
  findAnagrams(s, p)
);
