/**
 * 150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼
 */

// æœ‰æ•ˆçš„è¿ç®—ç¬¦åŒ…æ‹¬ +, -, *, / ã€‚æ¯ä¸ªè¿ç®—å¯¹è±¡å¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ã€‚

// è¾“å…¥: ["2", "1", "+", "3", "*"]
// è¾“å‡º: 9
// è§£é‡Š: è¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š((2 + 1) * 3) = 9

/*
è¾“å…¥: ["10", "6", "9", "3", "+", "-11", "*", "/", "*", "17", "+", "5", "+"]
è¾“å‡º: 22
è§£é‡Š: 
è¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š
  ((10 * (6 / ((9 + 3) * -11))) + 17) + 5
= ((10 * (6 / (12 * -11))) + 17) + 5
= ((10 * (6 / -132)) + 17) + 5
= ((10 * 0) + 17) + 5
= (0 + 17) + 5
= 17 + 5
= 22
*/

// åˆ›å»ºä¸€ä¸ªæ ˆ
class Stack {
  constructor() {
    this._data = [];
  }

  push(c) {
    this._data.push(c);
  }
  pop() {
    return this._data.pop();
  }
}

//å°è£…ä¸€ä¸ªç®—æœ¯æ–¹æ³•
const Sign = {
  '*': (x, y) => x * y,
  '/': (x, y) => (x / y) | 0,
  '+': (x, y) => x + y,
  '-': (x, y) => x - y,
};
const tokens = ['2', '1', '+', '3', '*'];
var evalRPN = function (tokens) {
  const stack = new Stack();

  tokens.forEach((item) => {
    //é‡è§ åŠ å‡ä¹˜é™¤ å‡ºæ ˆ è¿ç®—åçš„å€¼ å†è¿›æ ˆ
    if (item in Sign) {
      //åè¿›å…ˆå‡º
      const y = stack.pop();
      const x = stack.pop();
      const res = Sign[item](x, y);
      stack.push(res);
    } else {
      //å…¥æ ˆ
      stack.push(+item);
    }
  });
  //æ¨å‡ºæœ€åä¸€ä¸ªæ•°
  return stack.pop();
};

console.log(
  '%c ğŸº evalRPN: ',
  'font-size:20px;background-color: #93C0A4;color:#fff;',
  evalRPN(tokens)
);
